# CH01 邂逅openCV

## 1.1 OpenCV 周边概念认知

### **1.1.1 图像 处理、计算机视觉与OpenCV**

- **图像处理**( Image Processing)是用计算机对图像进行分析，以达到所需结果的技术，又称影像处理。图像处理技术一般包括图像压缩，增强和复原，匹配、描述和识别3个部分。图像处理一般指 数字图像处理( Digital Image Processing)。其中，数字图像是指用工业相机、摄像机、扫描仪等设备经过拍摄得到的一个大的二维数组。该数组的元素称为像素，其值称为灰度值。而数字图像处理是通过计算机对图像进行去除噪声、增强、复原、分割、提取特征等处理的方法和技术。

- **计算机视觉**(Computer Vision) 是一门研究如何使机器“看”的科学，具体地说，就是是指用摄影机和电脑代替人眼对目标进行识别、跟踪和测量等机器视觉，并进一做图形处理，用电脑处理使之成为更适合人眼观察或传送给仪器检测的图像的一门学科。作为一门科学学科，计算机视觉研究相关的理论和技术，试图建立能够从图像或者多维数据中获取“信息”的人工智能系统。因为感知可以看做是从感官信号中提取信息，所以计算机视觉也可以看做是研究如何使人工系统从图像或多维数据中“感知”的科学。

- **图像处理和计算机视觉的区别**
  
  1. 图像处理侧重于“处理”图像一如增强，还原，去噪，分割，等等;
  2. 而计算机视觉重点在于使用计算机( 也许是可移动式的)来模拟人的视觉，因此模拟才是计算机视觉领域的最终目标。
  3. 而OpenCV, 是一个基于开源发行的跨平台计算机视觉库，它实现了图像处理和计算机视觉方面的很多通用算法。

### **1.1.2 OpenCV概述**

OpenCV是一个基于BSD许可（开源）发行的跨平台计算机视觉和机器学习软件库，可以运行在Linux、Windows、Android和Mac OS操作系统上。它轻量级而且高效——由一系列 C 函数和少量 C++ 类构成，同时提供了Python、Ruby、MATLAB等语言的接口，实现了图像处理和计算机视觉方面的很多通用算法。OpenCV用C++语言编写，它具有C ++，Python，Java和MATLAB接口，并支持Windows，Linux，Android和Mac OS，OpenCV主要倾向于实时视觉应用，并在可用时利用MMX和SSE指令， 如今也提供对于C#、Ch、Ruby，GO的支持。

### **1.1.3 OpenCV起源和发展**
OpenCV 拥有包括 500 多个C函数的跨平台的中、高层 API。它不依赖于其它的外部库——尽管也可以使用某些外部库。

OpenCV 为Intel® Integrated Performance Primitives（IPP）提供了透明接口。这意味着如果有为特定处理器优化的 IPP 库，OpenCV 将在运行时自动加载这些库。 
（注：OpenCV 2.0版的代码已显著优化，无需IPP来提升性能，故2.0版不再提供IPP接口） 

最新版本是3.4 ，2017年12月23日发布 。

1999年1月，CVL项目启动。主要目标是人机界面，能被UI调用的实时计算机视觉库，为Intel处理器做了特定优化。

2000年6月，第一个开源版本OpenCV alpha 3发布。

2000年12月，针对linux平台的OpenCV beta 1发布。

2006年，支持Mac OS的OpenCV 1.0发布。

2009年9月，OpenCV 1.2（beta2.0）发布。

2009年10月1日，Version 2.0发布。

2010年12月6日，OpenCV 2.2发布。

2011年8月，OpenCV 2.3发布。

2012年4月2日，发布OpenCV 2.4。

2014年8月21日，发布OpenCv 3.0 alpha。

2014年11月11日，发布OpenCV 3.0 beta。

2015年6月4日，发布OpenCV 3.0。

2016年12月，发布OpenCV 3.2版（合并969个修补程序，关闭478个问题）

2017年8月3日，发布OpenCV 3.3版（最重要的更新是把DNN模块从contrib里面提到主仓库）

OpenCV 使用类BSDlicense，所以对非商业应用和商业应用都是免费（FREE）的。

OpenCV提供的视觉处理算法非常丰富，并且它部分以C语言编写，加上其开源的特性，处理得当，不需要添加新的外部支持也可以完整的编译链接生成执行程序，所以很多人用它来做算法的移植，OpenCV的代码经过适当改写可以正常的运行在DSP系统和ARM嵌入式系统中，这种移植在大学中经常作为相关专业本科生毕业设计或者研究生课题的选题。

### **1.1.4 OpenCV的安装与环境配置**
首先下载openCV。

![avatar](opencv安装.png)

然后完成openCV安装

![avatar](1.png)

在vs2019中创建一个新项目

![avatar](2.png)

右键属性修改包含目录如图所示

![avatar](3.png)

修改库目录如图所示

![avatar](4.png)

点击链接器点击输入添加依赖项如图所示

![avatar](5.png)

![avatar](6.png)

右键计算机选择高级系统设置

![avatar](8.png)

选择环境变量然后编辑，添加opencv中bin文件路径如图所示

点击确定环境变量配置完成。

### **1.5 简单图像处理**

**1、图片显示**

在文件源文件中创建一个新的c++文件

![avatar](9.png)

输入代码如图所示

![avatar](10.png)

实验结果入图所示

**2、图像腐蚀**

![avatar](腐蚀代码.png)

输入代码如图所示

![avatar](腐蚀结果.png)

实验结果入图所示

**3、图像模糊**

![avatar](模糊代码.png)

输入代码如图所示

![avatar](模糊结果.png)

实验结果如图所示

**4、边缘检测**

![avatar](图片边缘检测代码.png)

输入代码如图所示

![avatar](边缘检测效果.png)

实验结果如图所示

## **读取并播放视频**

![avatar](11.png)

代码如图

![avatar](12.png)

实验结果

## **图像采集**

![avatar](13.png)

代码如图

![avatar](14.png)

实验结果

**边缘检测**

![avatar](15.png)

代码如图

![avatar](16.png)

实验结果

# ch_2 启程前的认知准备

- 该部分例程：

1. 彩色目标跟踪。  
2. 光流。
3. 点追踪。
4. 人脸识别。
5. 支持向量机引导。


### **2.2 编译OpenCV源代码**

CMake的介绍

CMake是一个跨平台的安装（编译）工具，可以用简单的语句来描述所有平台的安装(编译过程)。他能够输出各种各样的makefile或者project文件，能测试编译器所支持的C++特性,类似UNIX下的automake。只是 CMake 的组态档取名为 CMakeLists.txt。Cmake 并不直接建构出最终的软件，而是产生标准的建构档（如 Unix 的 Makefile 或 Windows Visual C++ 的 projects/workspaces），然后再依一般的建构方式使用。这使得熟悉某个集成开发环境（IDE）的开发者可以用标准的方式建构他的软件，这种可以使用各平台的原生建构系统的能力是 CMake 和 SCons 等其他类似系统的区别之处。

### **2.3 opencv.hpp 头文件**

- opencv.hpp 中已经包含了OpenCV各模块的头文件

主要介绍了opencv.hpp中的各种头文件

### **2.4 命名规则**

![avatar](头文件.png)

# ch_3 HighGUI图形用户界面初步

## 3.1.1 OpenCV 的命名空间

- OpenCV中的C++类和函数都是定义在命名空间ev之内的，有两种方法可以访问:

- 第一种，是在代码开头的适当位置加上usingnamespace ev;这句代码，规定程序位于此命名空间之内;另外-一种， 是在使用OpenCV的每一一个类和函数时，都加入ev::命名空间。不过这种情况会很繁琐，每用一个OpenCV的类或者函数，都要多敲四下键盘写出cv::。所以，推荐大家在代码开头的适当位置，加上usingnamespace cv;这句。

- 比如在写简单的OpenCV程序的时候，以下三句可以作为标配:
finclude <opencv2/core/core. hpp>

include<opencv2/highgui/highgui.hpp>

using namespace CV;

## 3.1.2 Mat类简析
Mat类是用于保存图像以及其他矩阵数据的数据结构，默认情况下其尺寸为0。我们也可以指定其初始尺寸，比如定义一个Mat类对象，就要写ev::Mat pic (320,640,cv::Scalar( 100));

## 3.1.3 图像的载入与显示概述
在新版本的OpenCV2中，最简单的图像载入和显示只需要两句代码，非常便捷。这两句代码分别对应了两个函数，它们分别是imread()以及imshow()。

### 3.1.9 综合示例程序

![avatar](17.png)

代码如图

![avatar](18.png)

结果如图

### 3.2 滑动条创建与使用

![avatar](第三章实验2代码.png)

代码如图

![avatar](实验2效果图1.png)

![avatar](实验2效果图2.png)

![avatar](实验2效果图3.png)

结果如图

### 3.3 鼠标操作

![avatar](鼠标代码1.png)

![avatar](鼠标代码2.png)

代码如图

![avatar](鼠标结果.png)

结果如图